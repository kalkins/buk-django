language: python
python:
    - '3.6'

services:
    - postgresql

# Install dependencies
install:
    - pip install pipenv
    - pipenv install --dev --deploy

# Prepare the working environment
before_script:
    - cp buk/local_settings_example.py buk/local_settings.py
    - psql -c 'create database buk;' -U postgres

# Run tests
script:
    - coverage run --source='.' manage.py test

after_success:
    - codecov
